" 自動再読み込み
set autoread

set hidden

" 改行文字などの表示
set list
set listchars=tab:¦\ ,eol:↴,trail:-,nbsp:%,extends:>,precedes:<
set fillchars=vert:\ ,fold:\ ,diff:\

" カーソル行を常に中央に
set scrolloff=999

" 現在行と相対行を表示
set number
set relativenumber

" タブ・インデント設定
set expandtab
set tabstop=2
set shiftwidth=2
set softtabstop=2
set autoindent
set smartindent

" 検索設定
set ignorecase
set smartcase
set wrapscan
set incsearch

" ヤンクしたものをクリップボードにも
set clipboard=unnamed

" コロンとセミコロンを入れ替え
noremap : ;
noremap ; :

let mapleader =","

" <C-l>でEscする
vnoremap <C-l> <Esc>
inoremap <C-l> <Esc>
cnoremap <C-l> <C-c>
nnoremap <C-l> <Esc>

" シフトで多めに移動
nnoremap J 10j
nnoremap K 10k
nnoremap L 10l
nnoremap H 10h
vnoremap J 10j
vnoremap K 10k
vnoremap L 10l
vnoremap H 10h

" space+w で保存 space+W で全保存
nnoremap <space>w :<C-u>w<CR>
nnoremap <space>W :<C-u>wa<CR>

" sをprefixに分割・タブページ関連を割り当てる
nnoremap s <Nop>

" ss sv で分割
nnoremap ss :<C-u>sp<CR>
nnoremap sv :<C-u>vs<CR>

" s+hjkl で分割ウィンドウ間を移動
nnoremap sj <C-w>j
nnoremap sk <C-w>k
nnoremap sl <C-w>l
nnoremap sh <C-w>h

" s+HJKL で分割画面を移動
nnoremap sJ <C-w>J
nnoremap sK <C-w>K
nnoremap sL <C-w>L
nnoremap sH <C-w>H

" タブページを作成
nnoremap st :<C-u>tabnew<CR>
nnoremap sT :<C-u>Unite tab<CR>

" タブページを移動
nnoremap sn gt
nnoremap sp gT
nnoremap sN :<C-u>tabmove +1<CR>
nnoremap sP :<C-u>tabmove -1<CR>

" バッファを閉じる
nnoremap sq :<C-u>q<CR>

" キーボードマクロをQに降格
nnoremap q <Nop>
nnoremap Q q

" ノーマルモード時に改行
nnoremap <CR> o<Esc>

" 行末に ; , を追加
nnoremap <expr> <space>; getline('.')[col('$') - 2] == ';' ? "" : 'A;<Esc>'
nnoremap <expr> <space>, getline('.')[col('$') - 2] == ',' ? "" : 'A,<Esc>'

" 行を詰めずに削除
nnoremap <Space>d cc<ESC>
